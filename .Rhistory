library(Hmisc)
install.packages("Hmisc")
library(Hmisc)
plot1
plot1 + stat_summary(geom="ribbon", fun.data=mean_cl_normal,
width=0.1, conf.int=0.95, fill="lightblue") +
stat_summary(geom="line", fun.y=mean, linetype="dashed") +
stat_summary(geom="point", fun.y=mean, color="red")
plot1 + stat_summary(geom = "ribbon", fun.data = mean_cl_normal,
width = 0.1, conf.int = 0.95, fill = "lightblue")
plot1 +
stat_summary(geom = "ribbon", fun.data = mean_cl_normal,
width = 0.1, conf.int = 0.95, fill = "lightblue") +
stat_summary(geom = "line", fun.y = mean, linetype = "dashed") +
stat_summary(geom = "point", fun.y= mean, color = "red")
plot1 +
stat_summary(geom = "ribbon", fun.data = mean_cl_normal,
width = 0.1, conf.int = 0.95, fill = "lightblue") +
stat_summary(geom = "line", fun.y = mean) +
stat_summary(geom = "point", fun.y= mean, color = "red")
plot1 +
stat_summary(geom = "ribbon", fun.data = mean_cl_normal,
width = 0.1, conf.int = 0.95, fill = "lightblue") +
stat_summary(geom = "line", fun.y = mean) +
stat_summary(geom = "point", fun.y= mean)
plot1 +
stat_summary(geom = "ribbon", fun.data = mean_cl_normal,
width = 0.1, conf.int = 0.95, fill = "lightblue") +
stat_summary(geom = "line", fun.y = mean) +
stat_summary(geom = "point", fun.y = mean, shape = 'square')
plot1 + geom_ribbon()
plot1 + geom_ribbon(stat = 'summary', fun = mean)
plot1 + geom_ribbon(stat = 'summary', aes(ymin = edu_ratio, ymax = edu_ratio))
plot1 + geom_ribbon(stat = 'summary',
aes(ymin = edu_ratio, ymax = edu_ratio),
fill = "lightblue")
plot1 +
stat_summary(geom = "ribbon", fun.data = mean_cl_normal,
width = 0.1, conf.int = 0.95, fill = "lightblue") +
stat_summary(geom = "line", fun.y = mean) +
stat_summary(geom = "point", fun.y = mean, shape = 'square')
plot1 +
stat_summary(geom = "ribbon", fun.data = mean_cl_normal,
width = 0.1, conf.int = 0.95, fill = "lightblue") +
stat_summary(geom = "line", fun.y = mean) +
stat_summary(geom = "point", fun.y = mean, shape = 'square')
df %>% filter(year %in% c(as.Date('1918-01-01'),
as.Date('1938-01-01'),
as.Date('1958-01-01'),
as.Date('1978-01-01'),
as.Date('1998-01-01'),
as.Date('2018-01-01')))
df %>% filter(year %in% c(as.Date('1918-01-01'),
as.Date('1938-01-01'),
as.Date('1958-01-01'),
as.Date('1978-01-01'),
as.Date('1998-01-01'),
as.Date('2018-01-01')))
df %>% filter(year %in% c(as.Date('1918-01-01'),
as.Date('1938-01-01'),
as.Date('1958-01-01'),
as.Date('1978-01-01'),
as.Date('1998-01-01'),
as.Date('2018-01-01'))) %>%
ggplot(aes(x = children_per_woman, y = child_mortality,
color = income_group)) +
geom_point(shape = 1)
df %>% filter(year %in% c(as.Date('1918-01-01'),
as.Date('1938-01-01'),
as.Date('1958-01-01'),
as.Date('1978-01-01'),
as.Date('1998-01-01'),
as.Date('2018-01-01'))) %>%
ggplot(aes(x = children_per_woman, y = child_mortality,
color = income_group)) +
geom_point(shape = 1)
df %>% filter(year %in% c(as.Date('1918-01-01'),
as.Date('1938-01-01'),
as.Date('1958-01-01'),
as.Date('1978-01-01'),
as.Date('1998-01-01'),
as.Date('2018-01-01'))) %>%
ggplot(aes(x = children_per_woman, y = child_mortality,
color = income_group)) +
geom_point(shape = 21)
df %>% filter(year %in% c(as.Date('1918-01-01'),
as.Date('1938-01-01'),
as.Date('1958-01-01'),
as.Date('1978-01-01'),
as.Date('1998-01-01'),
as.Date('2018-01-01'))) %>%
ggplot(aes(x = children_per_woman, y = child_mortality,
color = income_group)) +
geom_point()
df %>% filter(year %in% c(as.Date('1918-01-01'),
as.Date('1938-01-01'),
as.Date('1958-01-01'),
as.Date('1978-01-01'),
as.Date('1998-01-01'),
as.Date('2018-01-01'))) %>%
ggplot(aes(x = children_per_woman, y = child_mortality,
color = income_group)) +
geom_point(shape = 1) +
facet_wrap(~year)
df
df %>% mutate(year = str_replace(year, '-*-*', ''))
df %>% mutate(year = str_replace(year, '\-*\-*', ''))
df %>% mutate(year = str_replace(year, '\\-*\\-*', ''))
df %>% mutate(year = str_replace(year, '\\-*\\-*', ' '))
str_replace(df$year, '\\-*\\-*', ' ')
df$year
str_replace(df$year, '\\-*\\-*', '')
substr(df$year, 1,4)
str_sub(df$year, 1, 4)
df %>% mutate(year = str_sub(df$year, 1, 4))
df <- read_csv('world-data-gapminder.csv')
df %>% mutate(year = str_sub(df$year, 1, 4))
df
df
df <- read_csv('world-data-gapminder.csv')
df <- df %>% mutate(year = str_sub(df$year, 1, 4))
df
df <- read_csv('world-data-gapminder.csv')
df <- df %>% mutate(year = str_sub(df$year, 1, 4))
df %>% filter(year == '1962')  %>%
ggplot(aes(x = children_per_woman, y = life_expectancy,
color = region, size = population)) + geom_point()
df
plot1 <- df %>% mutate(edu_ratio =
years_in_school_women / years_in_school_men) %>%
filter(between(year, '1970', '2015')) %>%
ggplot(aes(x = year, y = edu_ratio,
group = income_group, color = income_group)) +
geom_line(stat = 'summary', fun = mean) +
geom_point(stat = 'summary', fun = mean, shape = 'square')
plot1
plot1 <- df %>% mutate(edu_ratio =
years_in_school_women / years_in_school_men) %>%
filter(between(year, '1970', '2015')) %>%
ggplot(aes(x = year, y = edu_ratio,
group = income_group, color = income_group)) +
geom_line(stat = 'summary', fun = mean) +
geom_point(stat = 'summary', fun = mean, shape = 'square') +
theme(axis.text.x = element_text(angle = 90))
plot1
plot1 +
stat_summary(geom = "ribbon", fun.data = mean_cl_normal,
width = 0.1, conf.int = 0.95, fill = "lightblue") +
stat_summary(geom = "line", fun.y = mean) +
stat_summary(geom = "point", fun.y = mean, shape = 'square')
df %>% filter(year %in% c('1918',
'1938',
'1958',
'1978',
'1998',
'2018')) %>%
ggplot(aes(x = children_per_woman, y = child_mortality,
color = income_group)) +
geom_point(shape = 1) +
facet_wrap(~year)
df
df %>% filter(year == '2014')
df %>% filter(year == '2014') %>%
slice_max(co2_per_capita, n = 0)
df %>% filter(year == '2014') %>%
slice_max(co2_per_capita, n = 40)
df %>% filter(year == '2014') %>%
slice_max(co2_per_capita, n = 40)
df %>% filter(year == '2014') %>% arrage(co2_per_capita)
df %>% filter(year == '2014') %>%
slice_max(co2_per_capita, n = 40)
df %>% filter(year == '2014') %>% arrange(co2_per_capita)
df %>% filter(year == '2014') %>%
slice_max(co2_per_capita, n = 40)
df %>% filter(year == '2014') %>% arrange(desc(co2_per_capita)
df %>% filter(year == '2014') %>%
slice_max(co2_per_capita, n = 40)
df %>% filter(year == '2014') %>% arrange(desc(co2_per_capita))
df %>% filter(year == '2014') %>%
slice_max(co2_per_capita, n = 40) %>%
ggplot(aes(x = co2_per_capita, y = country, color = region))
df %>% filter(year == '2014') %>%
slice_max(co2_per_capita, n = 40) %>%
ggplot(aes(x = co2_per_capita, y = country, fill = region))
df %>% filter(year == '2014') %>%
slice_max(co2_per_capita, n = 40) %>%
ggplot(aes(x = co2_per_capita, y = country, fill = region)) +
geom_bar()
df %>% filter(year == '2014') %>%
slice_max(co2_per_capita, n = 40) %>%
ggplot(aes(x = co2_per_capita, y = country, fill = region)) +
geom_bar(stat="identity")
df %>% filter(year == '2014') %>%
slice_max(co2_per_capita, n = 40) %>%
ggplot(aes(x = co2_per_capita, y = country, fill = region)) +
geom_bar(stat = 'identity')
df %>% filter(year == '2014') %>%
slice_max(co2_per_capita, n = 40) %>%
ggplot(aes(x = co2_per_capita, y = country, color = region)) +
geom_bar(stat = 'identity')
df %>% filter(year == '2014') %>%
slice_max(co2_per_capita, n = 40) %>%
ggplot(aes(x = co2_per_capita, y = country, fill = region)) +
geom_bar(stat = 'identity')
df %>% filter(year == '2014') %>%
slice_max(co2_per_capita, n = 40) %>%
ggplot(aes(x = co2_per_capita, y = reorder(country, co2_per_capita), fill = region)) +
geom_bar(stat = 'identity')
df %>% filter(year == '2014') %>%
slice_max(co2_per_capita, n = 40) %>%
ggplot(aes(x = co2_per_capita, y = reorder(country, -co2_per_capita), fill = region)) +
geom_bar(stat = 'identity')
df
df %>% filter(year == '2014') %>%
mutate(co2_total = co2_per_capita / population)
df %>% mutate(co2_total = co2_per_capita / population) %>%
ggplot(aes(x = year, y = co2_total))
df %>% mutate(co2_total = co2_per_capita / population) %>%
ggplot(aes(x = year, y = co2_total, group = region))
df %>% mutate(co2_total = co2_per_capita / population) %>%
ggplot(aes(x = year, y = co2_total, group = region)) +
geom_line()
df %>% mutate(co2_total = co2_per_capita / population) %>%
ggplot(aes(x = year, y = co2_total, group = region)) +
geom_line()
df %>% mutate(co2_total = co2_per_capita / population) %>%
ggplot(aes(x = year, y = co2_total, group = region)) +
geom_area()
df %>% mutate(co2_total = co2_per_capita / population) %>%
ggplot(aes(x = year, y = co2_total, fill = region)) +
geom_area()
df %>% mutate(co2_total = co2_per_capita / population)
df %>% mutate(co2_total = co2_per_capita / population) %>%
ggplot(aes(x = year, y = co2_total, fill = region)) +
geom_area()
df %>% mutate(co2_total = co2_per_capita / population) %>%
ggplot(aes(x = year, y = co2_total, fill = region)) +
geom_area(position = 'stack')
df %>% mutate(co2_total = co2_per_capita / population) %>%
ggplot(aes(x = year, y = co2_total, group = region, fill = region)) +
geom_area(position = 'stack')
df %>% mutate(co2_total = co2_per_capita / population, na.rm = TRUE)
df %>% mutate(co2_total = co2_per_capita / population) %>%
drop_na(co2_total)
df %>% mutate(co2_total = co2_per_capita / population) %>%
drop_na(co2_total) %>%
ggplot(aes(x = year, y = co2_total, group = region, fill = region)) +
geom_area(position = 'stack')
df %>% mutate(co2_total = co2_per_capita / population) %>%
drop_na(co2_total)
df %>% mutate(co2_total = co2_per_capita / population) %>%
drop_na(co2_total) %>%
ggplot(aes(x = year, y = co2_total, group = region, fill = region)) +
geom_area(position = 'stack')
df %>% mutate(co2_total = co2_per_capita / population) %>%
drop_na(co2_total) %>%
ggplot(aes(x = year, y = co2_total, group = region)) +
geom_area(position = 'stack')
df %>% mutate(co2_total = co2_per_capita / population) %>%
drop_na(co2_total) %>%
ggplot(aes(x = year, y = co2_total, group = region, fill = region)) +
geom_area(position = 'stack') +
stat_summary(fun.y = 'sum', geom = 'line', size = 1, color = 'black')
df %>% mutate(co2_total = co2_per_capita / population) %>%
drop_na(co2_total) %>%
ggplot(aes(x = year, y = co2_total, group = region, fill = region)) +
geom_area(position = 'stack') +
stat_summary(fun.y = 'sum', geom = 'line')
df %>% mutate(co2_total = co2_per_capita / population) %>%
drop_na(co2_total) %>%
ggplot(aes(x = year, y = co2_total, group = region, fill = region)) +
geom_area(position = 'stack') +
stat_summary(fun.y = 'sum', geom = 'line', group = region)
df %>% mutate(co2_total = co2_per_capita / population) %>%
drop_na(co2_total) %>%
ggplot(aes(x = year, y = co2_total, group = region, fill = region)) +
geom_area(position = 'stack') +
stat_summary(fun.y = 'sum', geom = 'line')
df %>% mutate(co2_total = co2_per_capita / population) %>%
drop_na(co2_total) %>%
ggplot(aes(x = year, y = co2_total, group = region, fill = region)) +
stat_summary(geom = "area", fun.y = 'sum')
df %>% mutate(co2_total = co2_per_capita / population) %>%
drop_na(co2_total) %>%
ggplot(aes(x = year, y = co2_total, group = region, fill = region)) +
geom_area(position = 'stack') +
stat_summary(fun.y = 'sum')
df %>% mutate(co2_total = co2_per_capita / population) %>%
drop_na(co2_total) %>%
ggplot(aes(x = year, y = co2_total, group = region, fill = region)) +
stat_summary(geom = "area", fun.y = 'sum', position = 'stack')
df %>% mutate(co2_total = co2_per_capita / population) %>%
drop_na(co2_total) %>%
ggplot(aes(x = year, y = co2_total, group = region, fill = region)) +
stat_summary(geom = 'area', fun.y = 'sum', position = 'stack')
df %>% mutate(co2_total = co2_per_capita / population) %>%
ggplot(aes(x = year, y = co2_total, group = region, fill = region)) +
stat_summary(geom = 'area', fun.y = 'sum', position = 'stack')
df %>% mutate(co2_total = co2_per_capita / population) %>%
drop_na(co2_total) %>%
ggplot(aes(x = year, y = co2_total, group = region, fill = region)) +
stat_summary(geom = 'area', fun.y = 'sum', position = 'stack')
df %>% filter(year %in% c('1979',
'1991',
'2003',
'2015'))
df %>% filter(year %in% c('1979',
'1991',
'2003',
'2015')) %>%
ggplot(aes(x = income)) +
geom_histogram()
df %>% filter(year %in% c('1979',
'1991',
'2003',
'2015')) %>%
ggplot(aes(x = income)) +
geom_histogram() +
facet_wrap(~year, )
df %>% filter(year %in% c('1979',
'1991',
'2003',
'2015')) %>%
ggplot(aes(x = income)) +
geom_histogram() +
facet_wrap(~year, ncol = 4)
df <- read_csv('world-data-gapminder.csv')
df <- df %>% mutate(year = str_sub(df$year, 1, 4))
df %>% filter(year == '1962')  %>%
ggplot(aes(x = children_per_woman, y = life_expectancy,
color = region, size = population)) + geom_point()
library(tidyverse)
library(Hmisc)
df <- read_csv('world-data-gapminder.csv')
df <- df %>% mutate(year = str_sub(df$year, 1, 4))
df %>% filter(year == '1962')  %>%
ggplot(aes(x = children_per_woman, y = life_expectancy,
color = region, size = population)) + geom_point()
df <- read_csv('world-data-gapminder.csv')
df <- df %>% mutate(year = str_sub(df$year, 1, 4))
df %>% filter(year == '1962')  %>%
ggplot(aes(x = children_per_woman, y = life_expectancy,
color = region, size = population)) + geom_point()
df %>% filter(year == '1962')  %>%
ggplot(aes(x = children_per_woman, y = life_expectancy,
color = region, size = population)) + geom_point()
df %>% filter(year == '1962')  %>%
ggplot(aes(x = children_per_woman, y = life_expectancy,
color = region, size = population)) +
geom_point() +
ggtitle('Life expectancy vs Female fertility')
df %>% filter(year == '1962')  %>%
ggplot(aes(x = children_per_woman, y = life_expectancy,
color = region, size = population)) +
geom_point(alpha = 0.4) +
ggtitle('Life expectancy vs Female fertility')
df %>% filter(year == '1962')  %>%
ggplot(aes(x = children_per_woman, y = life_expectancy,
color = region, size = population)) +
geom_point(alpha = 0.6) +
ggtitle('Life expectancy vs Female fertility')
df %>% filter(year == '1962')  %>%
ggplot(aes(x = children_per_woman, y = life_expectancy,
color = region, size = population)) +
geom_point(alpha = 0.7) +
ggtitle('Life expectancy vs Female fertility')
df %>% filter(year == '1962')  %>%
ggplot(aes(x = children_per_woman, y = life_expectancy,
color = region, size = population)) +
geom_point(alpha = 0.5) +
ggtitle('Life expectancy vs Female fertility')
df %>% filter(year == '1962')  %>%
ggplot(aes(x = children_per_woman, y = life_expectancy,
color = region, size = population)) +
geom_point(alpha = 0.5) +
ggtitle('Life expectancy vs Female fertility') +
xlab("CHILDREN PER WOMAN") + ylab("LIFE EXPECTANCY")
df %>% filter(year == '1962')  %>%
ggplot(aes(x = children_per_woman, y = life_expectancy,
size = population)) +
geom_point(alpha = 0.5) +
ggtitle('Life expectancy vs Female fertility') +
xlab("CHILDREN PER WOMAN") + ylab("LIFE EXPECTANCY")
df %>% filter(year == '1962')  %>%
ggplot(aes(x = children_per_woman, y = life_expectancy,
size = population)) +
geom_point(alpha = 0.5) +
ggtitle('Life expectancy vs Female fertility') +
xlab('CHILDREN PER WOMAN') + ylab('LIFE EXPECTANCY') +
labs(fill = 'POPULATION')
df %>% filter(year == '1962')  %>%
ggplot(aes(x = children_per_woman, y = life_expectancy,
size = population)) +
geom_point(alpha = 0.5) +
ggtitle('Life expectancy vs Female fertility') +
xlab('CHILDREN PER WOMAN') + ylab('LIFE EXPECTANCY') +
theme(text = element_text(size=16))
df %>% filter(year == '1962')  %>%
ggplot(aes(x = children_per_woman, y = life_expectancy,
size = population)) +
geom_point(alpha = 0.5) +
ggtitle('Life expectancy vs Female fertility') +
xlab('CHILDREN PER WOMAN') + ylab('LIFE EXPECTANCY') +
theme(text = element_text(size = 16)) +
scale_size(range = c(lower ‚upper))
df %>% filter(year == '1962')  %>%
ggplot(aes(x = children_per_woman, y = life_expectancy,
size = population)) +
geom_point(alpha = 0.5) +
ggtitle('Life expectancy vs Female fertility') +
xlab('CHILDREN PER WOMAN') + ylab('LIFE EXPECTANCY') +
theme(text = element_text(size = 16)) +
scale_size(range = c(lower , upper))
df %>% filter(year == '1962')  %>%
ggplot(aes(x = children_per_woman, y = life_expectancy,
size = population)) +
geom_point(alpha = 0.5) +
ggtitle('Life expectancy vs Female fertility') +
xlab('CHILDREN PER WOMAN') + ylab('LIFE EXPECTANCY') +
theme(text = element_text(size = 16))
df %>% filter(year == '1962')  %>%
ggplot(aes(x = children_per_woman, y = life_expectancy,
size = population)) +
geom_point(alpha = 0.5) +
ggtitle('Life expectancy vs Female fertility') +
xlab('CHILDREN PER WOMAN') + ylab('LIFE EXPECTANCY') +
theme(text = element_text(size = 16)) +
scale_size(range = c(40, 70))
df %>% filter(year == '1962')  %>%
ggplot(aes(x = children_per_woman, y = life_expectancy,
size = population)) +
geom_point(alpha = 0.5) +
ggtitle('Life expectancy vs Female fertility') +
xlab('CHILDREN PER WOMAN') + ylab('LIFE EXPECTANCY') +
theme(text = element_text(size = 16)) +
scale_size(range = c(1,5))
df %>% filter(year == '1962')  %>%
ggplot(aes(x = children_per_woman, y = life_expectancy,
size = population)) +
geom_point(alpha = 0.5) +
ggtitle('Life expectancy vs Female fertility') +
xlab('CHILDREN PER WOMAN') + ylab('LIFE EXPECTANCY') +
theme(text = element_text(size = 16)) +
scale_size(range = c(1,10))
df %>% filter(year == '1962')  %>%
ggplot(aes(x = children_per_woman, y = life_expectancy,
size = population)) +
geom_point(alpha = 0.5) +
ggtitle('Life expectancy vs Female fertility') +
xlab('CHILDREN PER WOMAN') + ylab('LIFE EXPECTANCY') +
theme(text = element_text(size = 16)) +
scale_size(range = c(1,5))
df %>% filter(year == '1962')  %>%
ggplot(aes(x = children_per_woman, y = life_expectancy,
size = population)) +
geom_point(alpha = 0.5) +
ggtitle('Life expectancy vs Female fertility') +
xlab('CHILDREN PER WOMAN') + ylab('LIFE EXPECTANCY') +
theme(text = element_text(size = 16)) +
scale_size(range = c(1,6))
df %>% filter(year == '1962')  %>%
ggplot(aes(x = children_per_woman, y = life_expectancy,
size = population)) +
geom_point(alpha = 0.5) +
ggtitle('Life expectancy vs Female fertility') +
xlab('CHILDREN PER WOMAN') + ylab('LIFE EXPECTANCY') +
theme(text = element_text(size = 16)) +
scale_size(range = c(1,8))
df %>% filter(year == '1962')  %>%
ggplot(aes(x = children_per_woman, y = life_expectancy,
size = population)) +
geom_point(alpha = 0.5) +
ggtitle('Life expectancy vs Female fertility') +
xlab('CHILDREN PER WOMAN') + ylab('LIFE EXPECTANCY') +
theme(text = element_text(size = 16)) +
scale_size(range = c(1, 10))
# Create histograms for all x1 to x30 using sapply
par(mfrow=c(6,6), mar=c(1,1,1,1)) # set up a 5x6 grid of plots with small margins
sapply(na.omit(data[,4:33]), function(x) hist(x, main=paste("Histogram of",
names(data)[which(data==x)],
sep=" ")))
setwd("~/Desktop/UBC/DATA 583/583-project")
# Load the data from the CSV file
data <- read.csv("data_whole.csv", header = TRUE, check.names = FALSE)
sapply(na.omit(data[,4:33]), function(x) hist(x, main=paste("Histogram of",
names(data)[which(data==x)],
sep=" ")))
sapply(na.omit(data[,4:33]), function(x) hist(x, main=paste("Histogram of",
names(data)[which(data==x)],
sep=" ")))
hist(data, main = "Histogram of x1")
# Loop over x1 to x30 and create a histogram and a density plot for each variable
for (i in 4:33) {
# Create a histogram of the explanatory variable
hist(data[,i], main = paste("Histogram of", names(data)[i]))
# Create a density plot of the explanatory variable
plot(density(data[,i]), main = paste("Density plot of", names(data)[i]))
}
# Loop over x1 to x30 and create a histogram and a density plot for each variable
for (i in 4:33) {
# Create a histogram of the explanatory variable
hist(data[,i], main = paste("Histogram of", names(data)[i]))
# Create a density plot of the explanatory variable
plot(density(na.omit(data[,i])), main = paste("Density plot of", names(data)[i]))
}
# Loop over x1 to x30 and create a histogram and a density plot for each variable
for (i in 4:33) {
# Create a histogram of the explanatory variable
hist(data[,i], main = paste("Histogram of", names(data)[i]), xlab = "Values")
# Create a density plot of the explanatory variable
plot(density(na.omit(data[,i])), main = paste("Density plot of", names(data)[i]))
}
